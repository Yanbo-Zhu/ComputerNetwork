# 1 传输控制协议TCP简介

•面向连接的、可靠的、基于字节流的传输层通信协议；
•将应用的数据分割成报文段并发送给目标节点的TCP层；
•数据包都有序号Sequence，对方收到则发送ACK确认，未收到则重传；
•使用检验和来检验数据传输过程中是否有误；

# 2 Transport Layer 是用来干什么的 

- Ultimate goal of transport layer:  provide efficient, reliable, and cost-effective data transmission service to its users (=> processes in application layer)
- Transport layer makes use of services provided by network layer
- Transport entity:
    - Software (hardware) within transport layer that does the actual work
    - Located in either operating system kernel, library package bound into network applications, separate user process, or inside network interface card



# 3 network layer and Transport Layer
network layer: 
- logical communication between hosts
- provides end-to-end packet delivery using datagrams or virtual circuits


transport layer: 
- logical communication between processes
- relies on, enhances, network layer services
- Transport layer builds on network layer to provide data transport from a process on a source machine to a process on a destination machine with a desired level of reliability (independent of used physical network)
- It provides the abstractions that applications need to use the network

if transport layer service is so similar to network layer service, why are there two distinct layers?
- Transport code runs entirely on users’ machines, but network layer mostly runs on routers (operated by carrier) => what happens if network layer offers inadequate service? (packet loss, router crash) => user in no control of network layer
- Existence of transport layer makes it possible for the transport service to be more reliable than the underlying network!!
- Practical issues: transport primitives can be implemented as calls to library procedures to make them independent of the network primitives (different network service calls in connectionless Ethernet vs. connection-oriented WiMAX) => application programmers can write code according to a standard set of primitives


# 4 TCP和UDP


There are also two types of transport service:
- Connection-oriented transport service is similar to the connection-oriented network service
    - In both cases, connections have three phases: establishment, data transfer, and release
    - Addressing and flow control are also similar in both layers
- Connectionless transport service is also very similar to the connectionless network service
    - But meaningless to provide a connectionless transport service on top of a connection-oriented network service

TCP ist connection oriented reliable transport 

UDP ist connectless transport 


![](../60_01_Intro/image/Pasted%20image%2020241021072630.png)



# 5 ICMP (网间控制消息协议Internet Control Message Protocol)
如同名字一样， ICMP用来在主机/路由器之间传递控制信息的协议。 ICMP包可以包含诊断信息(ping, traceroute - 注意目前unix系统中的traceroute用UDP包而不是ICMP)，错误信息(网络/主机/端口 不可达 network/host/port unreachable), 信息(时间戳timestamp, 地址掩码address mask request, etc.)，或控制信息 (source quench, redirect, etc.) 。

你可以在http://www.iana.org/assignments/icmp-parameters中找到ICMP包的类型。

尽管ICMP通常是无害的，还是有些类型的ICMP信息需要丢弃。

Redirect (5), Alternate Host Address (6), Router Advertisement (9) 能用来转发通讯。

Echo (8), Timestamp (13) and Address Mask Request (17) 能用来分别判断主机是否起来，本地时间和地址掩码。注意它们是和返回的信息类别有关的。它们自己本身是不能被利用的，但它们泄露出的信息对攻击者是有用的。

ICMP消息有时也被用来作为DOS攻击的一部分(例如：洪水ping flood ping,死 ping ?呵呵，有趣 ping of death)?/p>















